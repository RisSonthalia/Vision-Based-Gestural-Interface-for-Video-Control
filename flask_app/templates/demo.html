<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{url_for('static', filename = 'css/styles.css')}}" type="text/css"/>
    <title>HandWave - Gesture Control for YouTube</title>
</head>
<body>
    <header class="py-3">
        <div class="container d-flex align-items-center justify-content-between">
            <div class="logo-container d-flex align-items-center">
                <i class="fas fa-hand-sparkles logo-icon me-2"></i>
                <h1 class="logo mb-0"><span class="hand">Hand</span><span class="wave">Wave</span></h1>
            </div>
            <div class="tagline">Control YouTube with gestures</div>
        </div>
    </header>

    <div class="container main-content">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="search-box">
                    <form method="post" class="mb-4">
                        <div class="input-group">
                            <span class="input-group-text bg-white border-end-0">
                                <i class="fab fa-youtube"></i>
                            </span>
                            <input type="text" class="form-control border-start-0" placeholder="Paste YouTube video link here" aria-label="YouTube link" name="link" required>
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-magic me-2"></i>Start Gesture Control
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        {% if video_id %}
        <div class="row g-4">
            <div class="col-lg-8">
                <div class="video-container mb-4">
                   
                    <div id="player" title="{{video_id}}" class="ratio ratio-16x9"></div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="webcam-container">
                    <div class="webcam-title-bar">
                        <i class="fas fa-camera me-2"></i>
                        <span>Gesture Detection</span>
                    </div>
                    <div class="webcam-wrapper">
                        <img src="/webcam" class="img-fluid webcam-feed w-100">
                        <div class="detection-status active">
                            <i class="fas fa-check-circle me-1"></i>
                            <span>Detecting</span>
                        </div>
                    </div>
                </div>

                <div class="gesture-info mt-4">
                    <div class="gesture-title-bar">
                        <i class="fas fa-hand-point-up me-2"></i>
                        <span>Available Gestures</span>
                    </div>
                    
                    <div class="gesture-grid">
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Play/Pause
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-play-pause"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Captions
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-closed-captioning"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Fullscreen
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-expand"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Vol Up (YT)
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-volume-up"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Vol Up (Sys)
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-volume-high"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Vol Down (YT)
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-volume-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Vol Down (Sys)
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-volume-low"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Forward
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-forward"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Backward
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-backward"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Move Mouse
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-mouse-pointer"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Left Click
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-hand-pointer"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Right Click
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-hand-point-up"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="gesture-card">
                            <div class="gesture-card-header">
                                <i class="fas fa-hand me-1"></i> Neutral
                            </div>
                            <div class="gesture-card-body">
                                <div class="gesture-icon">
                                    <i class="fas fa-hand-peace"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="row justify-content-center mt-5">
            <div class="col-lg-10">
                <div class="welcome-card">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <img src="/api/placeholder/500/400" alt="Gesture control illustration" class="intro-image mb-4 mb-md-0">
                        </div>
                        <div class="col-md-6">
                            <h2 class="welcome-title">Control YouTube Without Touching Your Device</h2>
                            <div class="feature-list">
                                <div class="feature-item">
                                    <div class="feature-icon">
                                        <i class="fas fa-hand"></i>
                                    </div>
                                    <div class="feature-text">
                                        <h5>Intuitive Hand Gestures</h5>
                                        <p>Simple hand movements to control your video playback</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item">
                                    <div class="feature-icon">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <div class="feature-text">
                                        <h5>Real-time Detection</h5>
                                        <p>Instant response to your hand movements</p>
                                    </div>
                                </div>
                                
                                <div class="feature-item">
                                    <div class="feature-icon">
                                        <i class="fas fa-handshake"></i>
                                    </div>
                                    <div class="feature-text">
                                        <h5>Accessibility Focused</h5>
                                        <p>Making videos accessible for everyone</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <p class="fw-bold">Ready to try? Paste a YouTube URL in the box above!</p>
                                <p class="text-muted small">Works with any public YouTube video</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <footer class="footer mt-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <div class="d-flex align-items-center justify-content-center justify-content-md-start">
                        <i class="fas fa-hand-sparkles logo-icon-sm me-2"></i>
                        <span class="footer-logo">HandWave</span>
                    </div>
                </div>
                <div class="col-md-6 text-center text-md-end mt-3 mt-md-0">
                    <p class="mb-0">Â© 2025 HandWave</p>
                </div>
            </div>
        </div>
    </footer>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      // This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      var video_id;
      
      function onYouTubeIframeAPIReady() {
        // Check if player element exists
        if (document.getElementById('player')) {
          video_id = document.getElementById('player').title;
          player = new YT.Player('player', {
            videoId: video_id,
            playerVars: {
              'playsinline': 1,
              'modestbranding': 1,
              'rel': 0
            },
            events: {
              'onStateChange': onPlayerStateChange
            }
          });
        }
      }
      
      // The API calls this function when the player's state changes.
      function onPlayerStateChange() {
        var playerState = player.getPlayerState();
        var state_dict = {playerState};
        var state_json = JSON.stringify(state_dict);
        $.ajax({
            url:"/video_info",
            type:"POST",
            contentType: "application/json",
            data: JSON.stringify(state_json)
        });
      }
    </script>
</body>
</html>